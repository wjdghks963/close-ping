var ClosePing=function(e){"use strict";function t(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{c(o.next(e))}catch(e){a(e)}}function r(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}c((o=o.apply(e,t||[])).next())}))}function n({url:e,data:n,useBeacon:o,resetNavigation:i}){const a="tab_activity_count";let s=!1,r=!1;const c=()=>{if(!s){s=!0;try{const i=JSON.stringify(n);o&&navigator.sendBeacon?navigator.sendBeacon(e,i):function(e,n){t(this,void 0,void 0,(function*(){try{yield fetch(e,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Accept:"application/json",Connection:"keep-alive"},keepalive:!0})}catch(e){console.error("Keep-Alive request failed:",e)}}))}(e,n)}catch(e){console.error("Error while sending data:",e)}finally{i()}}},d=()=>{sessionStorage.setItem(a,"0")},u=()=>0===parseInt(sessionStorage.getItem(a)||"0",10);d(),window.addEventListener("popstate",(()=>{r=!0})),document.addEventListener("click",(e=>{const t=e.target;"A"===t.tagName&&t.href&&(r=!0)})),document.addEventListener("visibilitychange",(()=>{document.hidden&&(()=>{const e=parseInt(sessionStorage.getItem(a)||"0",10);sessionStorage.setItem(a,(e+1).toString())})()})),window.addEventListener("beforeunload",(()=>{u()&&!r&&c()})),window.addEventListener("pagehide",(e=>{!u()||r||e.persisted||c()})),window.addEventListener("pageshow",(()=>{d(),r=!1}))}return"function"==typeof SuppressedError&&SuppressedError,e.handleClosePing=function({url:e,data:t,useBeacon:o=!0}){n({url:e,data:t,useBeacon:o,resetNavigation:()=>{}})},e}({});
