var ClosePing=function(e){"use strict";function n(e,n,t,o){return new(t||(t=Promise))((function(a,i){function r(e){try{d(o.next(e))}catch(e){i(e)}}function c(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,c)}d((o=o.apply(e,n||[])).next())}))}function t({url:e,data:t,useBeacon:o,resetNavigation:a}){var i;let r=!1,c=!1,d=!1;const s=()=>{if(!r){r=!0;try{const a=JSON.stringify(t);o&&navigator.sendBeacon?navigator.sendBeacon(e,a):function(e,t){n(this,void 0,void 0,(function*(){try{yield fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Accept:"application/json",Connection:"keep-alive"},keepalive:!0})}catch(e){console.error("Keep-Alive request failed:",e)}}))}(e,t)}catch(e){console.error("Error while sending data:",e)}finally{a()}}},u=null===(i=performance.getEntriesByType("navigation")[0])||void 0===i?void 0:i.type;d="reload"===u||"back_forward"===u,window.addEventListener("popstate",(()=>{c=!0})),document.addEventListener("click",(e=>{const n=e.target;"A"===n.tagName&&n.href&&(c=!0)})),window.addEventListener("beforeunload",(e=>{c||d||s()})),window.addEventListener("pagehide",(e=>{c||d||s()})),window.addEventListener("pageshow",(()=>{c=!1,d=!1}))}return"function"==typeof SuppressedError&&SuppressedError,e.handleClosePing=function({url:e,data:n,useBeacon:o=!0}){t({url:e,data:n,useBeacon:o,resetNavigation:()=>{}})},e}({});
